{
    "name": "MSD ",
    "author": "Chenxiaolong",
    "version": "v1.8",
    "updateTypeString": "module",
    "srcLink": "https://github.com/chenxiaolong/MSD",
    "keywords": [
        "Module"
    ],
    "images": 0,
    "README": "# MSD\n\n<img src=\"app/images/icon.svg\" alt=\"app icon\" width=\"72\" />\n\n![latest release badge](https://img.shields.io/github/v/release/chenxiaolong/MSD?sort=semver)\n![license badge](https://img.shields.io/github/license/chenxiaolong/MSD)\n\nMSD is an Android app for emulating mass storage devices over USB. It supports emulating both CD-ROM and disk devices.\n\nMSD is installed as a Magisk/KernelSU module so that it can run with system app privileges.\n\n<img src=\"app/images/light.png\" alt=\"light mode screenshot\" width=\"200\" /> <img src=\"app/images/dark.png\" alt=\"dark mode screenshot\" width=\"200\" />\n\n## Features\n\n* Supports Android 13 and newer\n* Supports emulating multiple mass storage devices at the same time\n  * Including mixing and matching CD-ROM and disk devices\n* Does not interfere with ADB, MTP, or any other normal USB functionality\n\n## Limitations\n\n* The device must use configfs for configuring USB gadgets\n  * To check, run `ls /config/usb_gadget/g1` as root.\n* The device's kernel must be compiled with support for the mass storage USB gadget\n  * To check, run `zcat /proc/config.gz | grep CONFIG_USB_CONFIGFS_MASS_STORAGE` as root.\n* Only local files are supported\n  * Android's Storage Access Framework allows cloud providers to present a file as a local file using FUSE (specifically, via `StorageManager.openProxyFileDescriptor`). Unfortunately, even for the few cloud providers that support this, these files cannot be used because Android's implementation of this mechanism does not allow files to be reopened. Setting up a mass storage device requires reopening the file because the kernel has no way to accept an already open file descriptor.\n\n## Usage\n\n1. Download the latest version from the [releases page](https://github.com/chenxiaolong/MSD/releases). To verify the digital signature, see the [verifying digital signatures](https://raw.githubusercontent.com/chenxiaolong/MSD/HEAD/#verifying-digital-signatures) section.\n\n2. Install the MSD module in Magisk/KernelSU.\n\n3. Reboot and open MSD.\n\n4. Add one or more CD-ROM/disk images.\n\n5. Apply the settings.\n\n6. That's it!\n\nMSD does not need to run in the background. Once configured, the mass storage devices remain available until they're explicitly disabled or the device is rebooted.\n\n## Permissions\n\nThe Android app part of MSD does not use any permissions at all. Also, despite that it is installed as a system app, the SELinux policy is configured so that it is not granted any more privileges than a regular user app.\n\nThe daemon part of MSD runs as the `system` user and with the `CAP_CHOWN` capability allowed. The daemon is responsible for all USB configuration. It accepts 3 requests from the app:\n\n* Query the currently active USB gadget functions\n* Set up mass storage devices from a list of file descriptors\n* Query the currently active mass storage devices\n\nWhen setting up mass storage devices, the daemon never opens files on its own. The app opens files itself and then sends the open file descriptor the daemon over a Unix socket. This way, even if a malicious client happened to be able to connect to the daemon, it can't expose files over mass storage devices that it didn't already have access to.\n\nThe daemon relies on SELinux for access control. If it detects certain scenarios where SELinux is not configured correctly, it will reject connections from all clients to avoid opening a security hole.\n\n## Advanced features\n\n### Debug mode\n\nMSD has hidden debug options that can be enabled or disabled by long pressing the version number.\n\n### Logs\n\nTo access the MSD's logs, enable debug mode and press `Open log directory` to open the log directory in the system file manager (DocumentsUI). Or alternatively, browse to `/sdcard/Android/com.chiller3.msd/files` manually.\n\n* `crash.log`: Logs for the last crash.\n* `/data/local/tmp/msd/*`: Logs for the boot scripts.\n\nTo monitor the daemon's logs, run `adb logcat -v color -s msd-tool` or look at `/data/local/tmp/msd/msd-tool.log`.\n\nWhen reporting bugs, please include all of the logs as they are extremely helpful for identifying what might be going wrong.\n\n## Verifying digital signatures\n\nBoth the zip file and the APK contained within are digitally signed.\n\n### Verifying zip file signature\n\nTo verify the digital signatures of the downloads, follow [the steps here](https://github.com/chenxiaolong/chenxiaolong/blob/master/VERIFY_SSH_SIGNATURES.md).\n\n### Verifying apk signature\n\nFirst, extract the apk from the zip and then run:\n\n```\napksigner verify --print-certs system/priv-app/com.chiller3.msd/app-release.apk\n```\n\nThen, check that the SHA-256 digest of the APK signing certificate is:\n\n```\nde6ea74388dcff7a6120c0f192e77a92c486d40bb166c392fdf4101abc125954\n```\n\n## Building from source\n\n### Building app and module\n\nMake sure the [Rust toolchain](https://www.rust-lang.org/) is installed. Rust must be installed via rustup because it provides the required Android toolchains:\n\n```bash\nrustup target add aarch64-linux-android\nrustup target add x86_64-linux-android\n```\n\n[cargo-android](https://github.com/chenxiaolong/cargo-android) must also be installed.\n\nThen, MSD can be built like most other Android apps using Android Studio or the gradle command line.\n\nTo build the APK:\n\n```bash\n./gradlew assembleDebug\n```\n\nTo build the Magisk/KernelSU module zip (which automatically runs the `assembleDebug` task if needed):\n\n```bash\n./gradlew zipDebug\n```\n\nThe output file is written to `app/build/distributions/debug/`. The APK will be signed with the default autogenerated debug key.\n\nTo create a release build with a specific signing key, set up the following environment variables:\n\n```bash\nexport RELEASE_KEYSTORE=/path/to/keystore.jks\nexport RELEASE_KEY_ALIAS=alias_name\n\nread -r -s RELEASE_KEYSTORE_PASSPHRASE\nread -r -s RELEASE_KEY_PASSPHRASE\nexport RELEASE_KEYSTORE_PASSPHRASE\nexport RELEASE_KEY_PASSPHRASE\n```\n\nand then build the release zip:\n\n```bash\n./gradlew zipRelease\n```\n\n## Contributing\n\nBug fix and translation pull requests are welcome and much appreciated!\n\nIf you are interested in implementing a new feature and would like to see it included in MSD, please open an issue to discuss it first. I intend for MSD to be as simple and low-maintenance as possible, so I am not too inclined to add new features, but I could be convinced otherwise.\n\n## License\n\nMSD is licensed under GPLv3. Please see [`LICENSE`](https://raw.githubusercontent.com/chenxiaolong/MSD/HEAD/./LICENSE) for the full license text.\n",
    "changeLog": "<p>The changelog can be found at: <a href=\"/chenxiaolong/MSD/blob/v1.8/CHANGELOG.md\"><code>CHANGELOG.md</code></a>.</p>\n<hr>\n<p>See <a href=\"/chenxiaolong/MSD/blob/v1.8/README.md\"><code>README.md</code></a> for information on how to install and use MSD.</p>\n<p>The downloads are digitally signed. Please consider <a href=\"/chenxiaolong/MSD/blob/v1.8/README.md#verifying-digital-signatures\">verifying the digital signatures</a> because MSD is installed as a privileged system app.</p>",
    "READMEsummary": "MSD is an Android app for emulating mass storage devices over USB.",
    "changeLogSummary": "The downloads are digitally signed."
}